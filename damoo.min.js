/*! Damoo v1.3.0 | Copyright (c) 2015 James Liu | Released under the MIT license */
;(function(e){var b=function(a,d,c){if(!(this instanceof b))return new b(a,d,c);this.canvas=new h(a,d,c);this.thread=new f};b.version="v1.3.0";b.dom=e.document;b.utils={};b.utils.preload=function(a,d){var c=b.dom.createElement("canvas"),g=c.getContext("2d");c.width=d.size*a.text.length*1.2;c.height=1.2*d.size;g.font=d.value;g.fillStyle="#fff";g.fillStyle=a.color;g.textAlign="start";g.textBaseline="top";g.fillText(a.text,0,0);return c};b.utils.random=function(a){return Math.random()*a};b.utils.round=
function(a){return a+.5|0};b.utils.floor=function(a){return a|0};var l=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(a){setTimeout(a,17)};b.prototype.show=function(){this.canvas.parent.appendChild(this.canvas.layer)};b.prototype.hide=function(){this.canvas.parent.removeChild(this.canvas.layer)};b.prototype.emit=function(a){a=b.utils.preload(a,this.canvas.font);this.thread.push({canvas:a,speed:Math.log(a.width),
offset:{x:this.canvas.width,y:this.canvas.font.size*b.utils.floor(b.utils.random(this.canvas.rows))}})};b.prototype.clear=function(){this.thread.empty()};b.prototype.start=function(){this.canvas.clear();for(var a=0;a<this.thread.length;a++){var b=this.thread.get(a).offset.x,c=this.thread.get(a).offset.y;this.canvas.draw(this.thread.get(a),b,c);this.thread.get(a).offset.x-=this.thread.get(a).speed;b<=-this.thread.get(a).canvas.width&&this.thread.remove(a)}l(function(a){return function(){a.start()}}(this))};
var h=function(a,d,c){this.parent=b.dom.getElementById(a);this.parent.style.position="relative";this.name=d;this.rows=c;12>this.height/this.rows&&(this.rows=this.height/12);this.width=this.parent.offsetWidth;this.height=this.parent.offsetHeight;this.font=new k(this.height/this.rows,"sans-serif");this.layer=b.dom.createElement("canvas");this.context=this.layer.getContext("2d");this.layer.className=this.name;this.layer.id=Math.random().toString(16).substr(2).substr(0,6);this.layer.width=this.width;
this.layer.height=this.height;this.layer.style.display="block";this.layer.style.backgroundColor="transparent";this.layer.style.position="absolute";this.layer.style.left=0;this.layer.style.top=0;this.layer.style.zIndex=99999};h.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};h.prototype.draw=function(a,d,c){this.context.drawImage(a.canvas,b.utils.round(d),b.utils.round(c))};var k=function(a,b){this.size=a;this.family=b};Object.defineProperty(k.prototype,"value",{get:function(){return this.size+
"px "+this.family}});var f=function(){this.pool=[]};f.prototype.push=function(a){this.pool.push(a)};f.prototype.get=function(a){return this.pool[a]};f.prototype.remove=function(a){this.pool.splice(a,1)};f.prototype.empty=function(){this.pool=[]};Object.defineProperty(f.prototype,"length",{get:function(){return this.pool.length}});e.Damoo=b})(window);